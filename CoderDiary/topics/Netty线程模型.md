# Netty线程模型

Netty使用的线程模型是Reactor模型，该模型基于NIO实现。

与之相对的还有Proactor模型，该模型基于AIO实现。

## NIO（同步非阻塞IO）

数据读取和写入的主体是应用本身，数据可读可写时由内核通知应用。

## AIO（异步非阻塞IO）

数据读取和写入的主体是内核，读操作完成后由内核通知应用，应用进行数据处理，完成后通知内核进行写入操作。

## Reactor模型

Reactor模型基于NIO实现，Reactor模型有三种：
1. 单线程Reactor模型
2. 多线程Reactor模型
3. 主从多线程模型

## Netty

Netty可以参数调整，在以上三种模式之间切换。

### 深入理解“同步”与“异步”

这是理解两者区别的关键。这里的“同步”和“异步”指的是**I/O操作本身（数据在内核缓冲区和用户缓冲区之间的拷贝）由谁完成**。

1.  **NIO 是同步的 (Synchronous)**：
    *   虽然`Selector.select()`是非阻塞的，但当你通过`SelectionKey`知道某个Channel就绪后，你调用`channel.read(buffer)`将数据从内核空间读到你的用户空间缓冲区（Buffer）时，**这个`read`操作仍然是同步的、需要等待的**。
    *   **应用程序是I/O操作的执行者**。

2.  **AIO 是异步的 (Asynchronous)**：
    *   你调用`asynchronousChannel.read(...)`后，这个方法会立刻返回一个`Future`。**操作系统内核会负责将数据从内核空间拷贝到你的缓冲区**，整个过程不需要应用程序参与。
    *   拷贝完成后，操作系统会调用你提供的`CompletionHandler`。
    *   **操作系统内核是I/O操作的执行者**，应用程序只是发起者和接收结果者。